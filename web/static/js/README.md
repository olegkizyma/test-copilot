# ATLAS Frontend - Refactored Architecture

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ –∑ –º–æ–Ω–æ–ª—ñ—Ç–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ –º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—É –∑ orchestrator.

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
js/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ logger.js           # –Ñ–¥–∏–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ config.js           # –°–ø—ñ–ª—å–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ orchestrator)
‚îÇ   ‚îî‚îÄ‚îÄ api-client.js       # –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π API –∫–ª—ñ—î–Ω—Ç
‚îú‚îÄ‚îÄ modules/                # –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–¥—É–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ chat-manager.js     # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —á–∞—Ç–æ–º (–∑–∞–º—ñ—Å—Ç—å 104KB —Ñ–∞–π–ª—É)
‚îÇ   ‚îî‚îÄ‚îÄ tts-manager.js      # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è TTS —Å–∏—Å—Ç–µ–º–æ—é
‚îú‚îÄ‚îÄ app-refactored.js       # –ì–æ–ª–æ–≤–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ index.js               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îî‚îÄ‚îÄ README.md              # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üîß –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ

### Core Modules

#### `core/logger.js`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –Ñ–¥–∏–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤—Å—å–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
- **–ó–∞–º—ñ–Ω—è—î**: –î—É–±–ª—é–≤–∞–Ω–Ω—è log() —Ñ—É–Ω–∫—Ü—ñ–π –≤ –∫–æ–∂–Ω–æ–º—É —Ñ–∞–π–ª—ñ
- **API**:
  ```javascript
  import { logger } from './core/logger.js';
  
  logger.info('Message');
  logger.error('Error', errorData);
  logger.debug('Debug info');
  ```

#### `core/config.js`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –°–ø—ñ–ª—å–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –∑ orchestrator
- **–ú—ñ—Å—Ç–∏—Ç—å**: AGENTS, API_ENDPOINTS, TTS_CONFIG, WORKFLOW_STAGES
- **API**:
  ```javascript
  import { AGENTS, API_ENDPOINTS } from './core/config.js';
  
  const atlasAgent = AGENTS.atlas;
  const orchestratorUrl = API_ENDPOINTS.orchestrator;
  ```

#### `core/api-client.js`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–ª—ñ—î–Ω—Ç –¥–ª—è –≤—Å—ñ—Ö API –≤–∏–∫–ª–∏–∫—ñ–≤
- **–ü—ñ–¥—Ç—Ä–∏–º—É—î**: REST API, Streaming, —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- **API**:
  ```javascript
  import { orchestratorClient } from './core/api-client.js';
  
  const response = await orchestratorClient.post('/chat', data);
  await orchestratorClient.stream('/chat/stream', data, onMessage);
  ```

### Feature Modules

#### `modules/tts-manager.js`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è TTS —Å–∏—Å—Ç–µ–º–æ—é
- **–í–∏–Ω–µ—Å–µ–Ω–æ –∑**: intelligent-chat-manager.js (–∑–º–µ–Ω—à–µ–Ω–Ω—è –Ω–∞ ~30KB)
- **–§—É–Ω–∫—Ü—ñ—ó**: –°–∏–Ω—Ç–µ–∑ –º–æ–≤–∏, –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ orchestrator
- **API**:
  ```javascript
  import { TTSManager } from './modules/tts-manager.js';
  
  const tts = new TTSManager();
  await tts.speak('–¢–µ–∫—Å—Ç', 'atlas');
  ```

#### `modules/chat-manager.js`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —á–∞—Ç–æ–º —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏
- **–í–∏–Ω–µ—Å–µ–Ω–æ –∑**: intelligent-chat-manager.js (–∑–º–µ–Ω—à–µ–Ω–Ω—è –Ω–∞ ~50KB)
- **–§—É–Ω–∫—Ü—ñ—ó**: –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, streaming, UI —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- **API**:
  ```javascript
  import { ChatManager } from './modules/chat-manager.js';
  
  const chat = new ChatManager();
  await chat.sendMessage('–ü—Ä–∏–≤—ñ—Ç');
  ```

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```javascript
// –Ü–º–ø–æ—Ä—Ç –≥–æ–ª–æ–≤–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É
import atlasApp from './app-refactored.js';

// –ê–±–æ —ñ–º–ø–æ—Ä—Ç –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥—É–ª—ñ–≤
import { ChatManager, TTSManager } from './index.js';

// –î–æ–¥–∞—Ç–æ–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
// –î–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ window.atlasApp
```

### –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥—É

–°—Ç–∞—Ä–∏–π –∫–æ–¥ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Å—É–º—ñ—Å–Ω–∏–º —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

```javascript
// –°—Ç–∞—Ä–∏–π —Å–ø–æ—Å—ñ–± (–≤—Å–µ —â–µ –ø—Ä–∞—Ü—é—î)
window.atlasChat.sendMessage('text');

// –ù–æ–≤–∏–π —Å–ø–æ—Å—ñ–± (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π)
import { ChatManager } from './modules/chat-manager.js';
const chat = new ChatManager();
chat.sendMessage('text');
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ Orchestrator

### –°–ø—ñ–ª—å–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- `AGENTS` - —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–≥–µ–Ω—Ç—ñ–≤
- `WORKFLOW_STAGES` - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –µ—Ç–∞–ø–∏ workflow
- `API_ENDPOINTS` - –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–æ—Ä—Ç–∏ —Ç–∞ URL

### TTS Events
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó TTS:
```javascript
// –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí Orchestrator
POST /tts/completed { "voice": "dmytro" }

// Orchestrator —á–µ–∫–∞—î –ø–æ–¥—ñ—ó –∑–∞–º—ñ—Å—Ç—å —Ç–∞–π–º–µ—Ä—ñ–≤
await completionPromise; // –†–µ–∞–ª—å–Ω–∞ –ø–æ–¥—ñ—è, –Ω–µ setTimeout
```

## üìä –ü–µ—Ä–µ–≤–∞–≥–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:
- ‚ùå `intelligent-chat-manager.js`: 104KB
- ‚ùå –î—É–±–ª—é–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ –∫–æ–∂–Ω–æ–º—É —Ñ–∞–π–ª—ñ
- ‚ùå –†—ñ–∑–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–≥–µ–Ω—Ç—ñ–≤
- ‚ùå –ú–æ–Ω–æ–ª—ñ—Ç–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –ü—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞: ~20KB –Ω–∞ –º–æ–¥—É–ª—å
- ‚úÖ –Ñ–¥–∏–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- ‚úÖ –ß–∏—Å—Ç–∏–π —Ä–æ–∑–¥—ñ–ª –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ
- ‚úÖ –õ–µ–≥–∫–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```javascript
// –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥—É–ª—ñ–≤
import { TTSManager } from './modules/tts-manager.js';

const tts = new TTSManager();
await tts.init();
console.log('TTS enabled:', tts.isEnabled());
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ `core/config.js`:

```javascript
export const API_ENDPOINTS = {
    orchestrator: 'http://localhost:5101',
    frontend: 'http://localhost:5002',  // –†–µ–∞–ª—å–Ω–∏–π –ø–æ—Ä—Ç
    tts: 'http://localhost:3001',
    goose: 'http://localhost:3000'
};

export const TTS_CONFIG = {
    enabled: true,
    defaultVoice: 'dmytro',
    supportedVoices: ['dmytro', 'tetiana', 'mykyta', 'oleksa']
};
```

## üö® –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

1. **Lint –ø–æ–º–∏–ª–∫–∏ –≤ `intelligent-chat-manager.js`**: –°—Ç–∞—Ä–∏–π —Ñ–∞–π–ª –º–∞—î —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–æ–≤—ñ –º–æ–¥—É–ª—ñ
2. **–ü–æ—Ä—Ç frontend**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è 5002 –∑–∞–º—ñ—Å—Ç—å 5001 (–∑–≥—ñ–¥–Ω–æ –∑ atlas_server.py)
3. **–ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å**: –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥—É

## üìù TODO

- [ ] –ü–æ–≤–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è HTML —à–∞–±–ª–æ–Ω—ñ–≤ –Ω–∞ –Ω–æ–≤—ñ –º–æ–¥—É–ª—ñ
- [ ] –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–æ–≥–æ `intelligent-chat-manager.js`
- [ ] –î–æ–¥–∞–≤–∞–Ω–Ω—è unit —Ç–µ—Å—Ç—ñ–≤
- [ ] –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è bundle size

## ü§ù –°–ø—ñ–≤–ø—Ä–∞—Ü—è

–ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π:
1. –°—Ç–≤–æ—Ä—é–π—Ç–µ –æ–∫—Ä–µ–º—ñ –º–æ–¥—É–ª—ñ –≤ `modules/`
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–ø—ñ–ª—å–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑ `core/config.js`
3. –õ–æ–≥—É–π—Ç–µ —á–µ—Ä–µ–∑ `core/logger.js`
4. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–π—Ç–µ –∑ orchestrator –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é
